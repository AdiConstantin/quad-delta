<div class="page">
  <h1>Products</h1>
  
  <!-- Debug info -->
  <!-- <div style="background: #f0f0f0; padding: 10px; margin: 10px 0; font-family: monospace;">
    <p>Loading: {{ (loading$ | async) }}</p>
    <p>Items count: {{ (items$ | async)?.length || 0 }}</p>
    <p>Items: {{ (items$ | async) | json }}</p>
  </div> -->

  <form [formGroup]="form" (ngSubmit)="create()" class="form">
    <input placeholder="SKU" formControlName="sku" />
    <input placeholder="Name" formControlName="name" />
    <input type="number" step="0.01" placeholder="Price" formControlName="price" />
    <button type="submit" [disabled]="form.invalid">Add</button>
  </form>

  <ng-container *ngIf="(loading$ | async); else tableTpl">
    <p>Loadingâ€¦</p>
  </ng-container>

  <ng-template #tableTpl>
    <table border="1" cellpadding="6">
      <thead><tr><th>Id</th><th>SKU</th><th>Name</th><th>Price</th></tr></thead>
      <tbody>
        <tr *ngFor="let p of (items$ | async)">
          <td>{{p.id}}</td><td>{{p.sku}}</td><td>{{p.name}}</td><td>{{p.price}}</td>
        </tr>
      </tbody>
    </table>
  </ng-template>
</div>
